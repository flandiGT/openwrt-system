---
- name: set hostname
  uci: command=set config="system" type="system" index=0 option="hostname" value={{ hostname }}
  when: hostname != ''
  notify:
    - uci commit system
    - reload system

- name: set timezone
  uci: command=set config="system" type="system" index=0 option="timezone" value="{{ timezone }}"
  when: timezone != ''
  notify:
    - uci commit system
    - reload system

- name: set zonename
  uci: command=set config="system" type="system" index=0 option="zonename" value="{{ zonename }}"
  when: zonename != ''
  notify:
    - uci commit system
    - reload system

- name: set enable NTP client
  uci: command=set config="system" section="ntp" option="enabled" value={{ enable_ntp_client | int }}
  when: enable_ntp_client != ''
  notify:
    - uci commit system
    - reload system

- name: set enable NTP server
  uci: command=set config="system" section="ntp" option="enable_server" value={{ enable_ntp_server | int }}
  when: enable_ntp_server != ''
  notify:
    - uci commit system
    - reload system

- name: set NTP servers
  uci: command=set_list config="system" section="ntp" option="server" value={{ ntp_servers | default([]) | join(',') }}
  notify:
    - uci commit system
    - reload system

- name: set leds
  include: set_leds.yml
  with_dict: "{{leds}}"
  when: leds != {}
